<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="jakarta.faces.facelets"
        xmlns:f="jakarta.faces.core"
        xmlns:p="primefaces"
        template="/templates/template.xhtml"
>
    <ui:define name="title">Admin</ui:define>
    <ui:define name="content">
        <div class="flex align-items-center justify-content-between mb-2">
            <div class="flex flex-shrink-1 flex-column">
                <h1 class="m-0 font-semibold 650 text-3xl line-height-3">
                    Admin dashboard
                </h1>
                <h1 class="m-0 text-575 text-xl line-height-3">
                    Hey Admin! You can manage all users listings here
                </h1>
            </div>
            <h:form>
                <div class="flex flex-shrink-1 align-self-end">
                    <p:selectCheckboxMenu id="animal"
                                          dynamic="true"
                                          filter="true" filterMatchMode="startsWith"
                                          label="Animal kind" updateLabel="true" showSelectAll="false"
                                          selectedLabel="Animals Selected"
                                          style="width: 15rem" panelStyle="width: 15rem" scrollHeight="250"
                                          value="#{tableMB.animals}">
                        <f:selectItems value="#{tableMB.animals}"/>

                        <f:facet name="footer">
                            <p:divider styleClass="mt-0"/>
                            <h:outputText value="#{tableMB.animals.size()} animals"
                                          styleClass="py-1 block font-bold"/>
                        </f:facet>
                    </p:selectCheckboxMenu>
                </div>
            </h:form>
        </div>
        <div class="flex align-items-center justify-content-center">
            <div class="product">
                <h:form id="form">

                    <p:dataView var="listing" value="#{tableMB.listings}" rows="12" paginator="true"
                                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                gridIcon="pi pi-th-large" listIcon="pi pi-bars"
                                layout="grid" gridRowStyleClass="lg:col-6 xl:col-4" flex="true">
                        <p:dataViewGridItem>
                            <p:growl id="message" showDetail="true"/>
                            <div class="product-grid-item card border-1">
                                <div class="product-grid-item-top">
                                    <div>
                                        <i class="pi pi-tag product-category-icon"/>
                                        <span class="product-category">#{listing.type}</span>
                                    </div>
                                </div>
                                <div class="product-grid-item-content">
                                    <p:graphicImage name="#{listing.image}"/>
                                    <div class="product-name">#{listing.name}</div>
                                    <div class="product-description">#{listing.description}</div>
                                </div>
                                <div class="product-grid-item-bottom">
                                    <div>
                                        <i class="pi pi-globe product-location-icon"/>
                                        <span class="product-category">#{listing.location}</span>
                                    </div>
                                    <div>
                                        <p:commandButton value="Delete" action="#{tableMB.deleteListing(listing)}"
                                                         update="message"
                                                         styleClass="ui-button-danger mr-2" icon="pi pi-times">
                                            <p:confirm header="Confirmation"
                                                       message="Are you sure about permanently deleting this listing?"
                                                       icon="pi pi-info-circle"
                                                       yesButtonLabel="Yes"
                                                       yesButtonClass="bg-red-600 text-white"
                                                       yesButtonIcon="pi pi-trash"
                                                       noButtonLabel="No"
                                                       noButtonClass="bg-green-600 text-white"
                                                       noButtonIcon="pi pi-heart"/>
                                        </p:commandButton>
                                    </div>
                                </div>
                            </div>
                        </p:dataViewGridItem>

                        <p:dataViewListItem>
                            <p:growl id="messageList" showDetail="true"/>
                            <div class="product-list-item">
                                <p:graphicImage name="#{listing.image}"/>
                                <div class="product-list-detail">
                                    <div class="product-name">#{listing.name}</div>
                                    <div class="product-description">#{listing.description}</div>
                                    <i class="pi pi-tag product-category-icon"/><span
                                        class="product-category">#{listing.type}</span>
                                </div>
                                <div class="product-list-action">
                                    <div>
                                        <i class="pi pi-globe product-location-icon"/>
                                        <span class="product-category">#{listing.location}</span>
                                    </div>
                                    <div>
                                        <p:commandButton value="Delete" action="#{tableMB.deleteListing(listing)}"
                                                         update="messageList"
                                                         styleClass="ui-button-danger mr-2" icon="pi pi-times">
                                            <p:confirm header="Confirmation"
                                                       message="Are you sure about permanently deleting this listing?"
                                                       icon="pi pi-info-circle"
                                                       yesButtonLabel="Yes"
                                                       yesButtonClass="bg-red-600 text-white"
                                                       yesButtonIcon="pi pi-trash"
                                                       noButtonLabel="No"
                                                       noButtonClass="bg-green-600 text-white"
                                                       noButtonIcon="pi pi-heart"/>
                                        </p:commandButton>
                                    </div>
                                </div>
                            </div>
                        </p:dataViewListItem>
                    </p:dataView>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350">
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no ui-button-flat"
                                         icon="pi pi-times"/>
                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes"
                                         icon="pi pi-check"/>
                    </p:confirmDialog>
                </h:form>
            </div>
        </div>
    </ui:define>

</ui:composition>

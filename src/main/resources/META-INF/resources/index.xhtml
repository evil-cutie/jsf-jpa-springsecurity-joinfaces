<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="jakarta.faces.facelets"
        xmlns:p="primefaces"
        xmlns:f="jakarta.faces.core"
        template="templates/template.xhtml"
>
    <ui:define name="title">Adoption</ui:define>
    <ui:define name="content">
        <div class="flex align-items-center justify-content-between mb-2">
            <div class="flex flex-shrink-1 flex-column">
                <h1 class="m-0 font-semibold 650 text-3xl line-height-3">
                    Home
                </h1>
                <h1 class="m-0 text-575 text-xl line-height-3">
                    Take a look at our animals, maybe you'd like to adopt one?
                </h1>
            </div>
            <h:form styleClass="flex flex-shrink-1 align-self-end">
                <div class="flex">
                    <p:selectCheckboxMenu id="animal"
                                          dynamic="true"
                                          filter="true" filterMatchMode="startsWith"
                                          label="Animal type" updateLabel="true" showSelectAll="false"
                                          style="width: 15rem" panelStyle="width: 15rem" scrollHeight="250"
                                          value="#{tableMB.selectedAnimals}"
                                          styleClass="mr-2">
                        <p:ajax event="itemSelect" listener="#{tableMB.onItemSelect}" update="form"/>
                        <p:ajax event="itemUnselect" listener="#{tableMB.onItemUnselect}" update="form"/>
                        <f:selectItems value="#{tableMB.animals}"/>
                    </p:selectCheckboxMenu>
                    <p:selectCheckboxMenu id="city"
                                          dynamic="true"
                                          filter="true" filterMatchMode="startsWith"
                                          label="City" updateLabel="true" showSelectAll="false"
                                          style="width: 15rem" panelStyle="width: 15rem" scrollHeight="250"
                                          value="#{tableMB.selectedCities}">
                        <p:ajax event="itemSelect" listener="#{tableMB.onItemSelect}" update="form"/>
                        <p:ajax event="itemUnselect" listener="#{tableMB.onItemUnselect}" update="form"/>
                        <f:selectItems value="#{tableMB.cities}"/>
                    </p:selectCheckboxMenu>
                </div>
            </h:form>
        </div>
        <div class="flex align-items-center justify-content-center">
            <div class="product w-full">
                <h:form id="form">
                    <p:dataView id="dataView" var="listing" value="#{tableMB.listings}" rows="12" paginator="true"
                                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                paginatorPosition="bottom"
                                gridIcon="pi pi-th-large" listIcon="pi pi-bars"
                                layout="grid" gridRowStyleClass="lg:col-6 xl:col-4" flex="true">

                        <p:dataViewGridItem>
                            <div class="product-grid-item card border-1">
                                <div class="product-grid-item-top">
                                    <div>
                                        <i class="pi pi-tag product-category-icon"/>
                                        <span class="product-category">#{listing.animal.type}</span>
                                    </div>
                                </div>
                                <div class="product-grid-item-content">
                                    <p:graphicImage name="#{listing.image}"/>
                                    <div class="product-name">#{listing.title}</div>
                                    <div class="product-description">#{listing.description}</div>
                                </div>
                                <div class="product-grid-item-bottom">
                                    <div class="flex align-items-center">
                                        <i class="pi pi-home product-location-icon mr-1"/>
                                        <span class="product-category">#{listing.city.name}</span>
                                    </div>
                                    <div>
                                        <p:commandButton value="Adopt"
                                                         action="#{tableMB.showPhoneNumber(listing)}"/>
                                    </div>
                                </div>
                            </div>
                        </p:dataViewGridItem>

                        <p:dataViewListItem>
                            <div class="product-list-item">
                                <p:graphicImage name="#{listing.image}"/>
                                <div class="product-list-detail">
                                    <div class="product-name">#{listing.title}</div>
                                    <div class="product-description">#{listing.description}</div>
                                    <i class="pi pi-tag product-category-icon"/><span
                                        class="product-category">#{listing.animal.type}</span>
                                    <i class="pi pi-home product-location-icon"/>
                                    <span class="product-category">#{listing.city.name}</span>
                                </div>
                                <div class="product-list-action">
                                    <div class="flex justify-content-end">
                                        <p:commandButton value="Adopt"
                                                         action="#{tableMB.showPhoneNumber(listing)}"/>
                                    </div>
                                </div>
                            </div>
                        </p:dataViewListItem>
                    </p:dataView>
                </h:form>
            </div>
        </div>
    </ui:define>
</ui:composition>
